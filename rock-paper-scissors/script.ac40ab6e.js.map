{"version":3,"sources":["js/_utils.js","js/_modal.js","js/script.js"],"names":["$","document","querySelector","bind","$$","querySelectorAll","animate","$el","animation","Promise","resolve","classList","add","addEventListener","removeAnimation","remove","removeEventListener","delay","duration","setTimeout","toggleDisplay","toggle","genRandomNum","min","max","Math","floor","random","getSavedItem","key","localStorage","getItem","err","DOMException","message","includes","saveItem","value","setItem","require","$overlay","$rulesBtn","$closeModalBtn","hideModal","event","stopPropagation","target","contains","then","showModal","$playField","$result","$leftCol","$rightCol","$status","$score","$center","savedScore","console","warn","score","Number","isGameInProgress","textContent","newOptionElement","className","$option","createElement","$spanWithIcon","cloneNode","append","options","name","beats","map","opt","$element","toLowerCase","render","playerPick","housePick","isPlayerWon","play","currentTarget","clickedOptName","getAttribute","findIndex","length","_","i","filter","newRound","removeChild","lastElementChild","forEach"],"mappings":";AAsCO,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,SAAA,QAAA,aAAA,QAAA,aAAA,QAAA,cAAA,QAAA,MAAA,QAAA,QAAA,QAAA,GAAA,QAAA,OAAA,EAtCA,IAAMA,EAAIC,SAASC,cAAcC,KAAKF,UAsCtC,QAAA,EAAA,EApCA,IAAMG,EAAKH,SAASI,iBAAiBF,KAAKF,UAoC1C,QAAA,GAAA,EAlCA,IAAMK,EAAU,SAACC,EAAKC,GAC3B,OAAA,IAAIC,QAAQ,SAACC,GAOXH,EAAII,UAAUC,IAAIJ,GAClBD,EAAIM,iBAAiB,eAPG,SAAlBC,IACJP,EAAII,UAAUI,OAAOP,GACrBD,EAAIS,oBAAoB,eAAgBF,GACxCJ,EAAQH,QA6BP,QAAA,QAAA,EAtBA,IAAMU,EAAQ,WAACC,IAAAA,EAAW,UAAA,OAAA,QAAA,IAAA,UAAA,GAAA,UAAA,GAAA,EAC/B,OAAA,IAAIT,QAAQ,SAACC,GACXS,WAAWT,EAASQ,MAoBjB,QAAA,MAAA,EAjBA,IAAME,EAAgB,SAACb,GAC5BA,EAAII,UAAUU,OAAO,WAgBhB,QAAA,cAAA,EAbA,IAAMC,EAAe,WAACC,IAAAA,EAAM,UAAA,OAAA,QAAA,IAAA,UAAA,GAAA,UAAA,GAAA,EAAGC,EAAM,UAAA,OAAA,QAAA,IAAA,UAAA,GAAA,UAAA,GAAA,EAC1CC,OAAAA,KAAKC,MAAMH,EAAME,KAAKE,UAAYH,EAAMD,KAYnC,QAAA,aAAA,EAVA,IAAMK,EAAe,SAACC,GACvB,IACKC,OAAAA,aAAaC,QAAQF,GAC5B,MAAOG,GACHA,GAAAA,aAAeC,cAAgBD,EAAIE,QAAQC,SAAS,gBACtD,OAAO,KACHH,MAAAA,IAIH,QAAA,aAAA,EAAA,IAAMI,EAAW,SAACP,EAAKQ,GACxB,IAEK,OADPP,aAAaQ,QAAQT,EAAKQ,IACnB,EACP,MAAOL,GACHA,GAAAA,aAAeC,cAAgBD,EAAIE,QAAQC,SAAS,gBACtD,OAAO,EACHH,MAAAA,IAPH,QAAA,SAAA;;ACtCP,IAAsCO,EAAAA,QAAQ,YAAtCvC,EAAAA,EAAAA,EAAGM,EAAAA,EAAAA,QAASc,EAAAA,EAAAA,cAEdoB,EAAWxC,EAAE,YACbyC,EAAYzC,EAAE,UACd0C,EAAiB1C,EAAE,mBAEnB2C,EAAY,SAACC,GACjBA,EAAMC,kBACEC,IAAAA,EAAWF,EAAXE,QAEJA,IAAWN,GAAYE,EAAeK,SAASD,KACjDxC,EAAQkC,EAAU,WAAWQ,KAAK5B,IAIhC6B,EAAY,WAChB7B,EAAcoB,GACdlC,EAAQkC,EAAU,WAGpBE,EAAe7B,iBAAiB,QAAS8B,GAAW,GACpDH,EAAS3B,iBAAiB,QAAS8B,GAAW,GAC9CF,EAAU5B,iBAAiB,QAASoC;;ACwGpC,aA9HA,QAAA,YACA,IAAA,EAAA,QAAA,YA6HA,SAAA,EAAA,EAAA,EAAA,EAAA,EAAA,EAAA,EAAA,GAAA,IAAA,IAAA,EAAA,EAAA,GAAA,GAAA,EAAA,EAAA,MAAA,MAAA,GAAA,YAAA,EAAA,GAAA,EAAA,KAAA,EAAA,GAAA,QAAA,QAAA,GAAA,KAAA,EAAA,GAAA,SAAA,EAAA,GAAA,OAAA,WAAA,IAAA,EAAA,KAAA,EAAA,UAAA,OAAA,IAAA,QAAA,SAAA,EAAA,GAAA,IAAA,EAAA,EAAA,MAAA,EAAA,GAAA,SAAA,EAAA,GAAA,EAAA,EAAA,EAAA,EAAA,EAAA,EAAA,OAAA,GAAA,SAAA,EAAA,GAAA,EAAA,EAAA,EAAA,EAAA,EAAA,EAAA,QAAA,GAAA,OAAA,MAAA,SAAA,EAAA,EAAA,GAAA,IAAA,EAAA,OAAA,KAAA,GAAA,GAAA,OAAA,sBAAA,CAAA,IAAA,EAAA,OAAA,sBAAA,GAAA,IAAA,EAAA,EAAA,OAAA,SAAA,GAAA,OAAA,OAAA,yBAAA,EAAA,GAAA,cAAA,EAAA,KAAA,MAAA,EAAA,GAAA,OAAA,EAAA,SAAA,EAAA,GAAA,IAAA,IAAA,EAAA,EAAA,EAAA,UAAA,OAAA,IAAA,CAAA,IAAA,EAAA,MAAA,UAAA,GAAA,UAAA,GAAA,GAAA,EAAA,EAAA,EAAA,OAAA,IAAA,GAAA,QAAA,SAAA,GAAA,EAAA,EAAA,EAAA,EAAA,MAAA,OAAA,0BAAA,OAAA,iBAAA,EAAA,OAAA,0BAAA,IAAA,EAAA,OAAA,IAAA,QAAA,SAAA,GAAA,OAAA,eAAA,EAAA,EAAA,OAAA,yBAAA,EAAA,MAAA,OAAA,EAAA,SAAA,EAAA,EAAA,EAAA,GAAA,OAAA,KAAA,EAAA,OAAA,eAAA,EAAA,EAAA,CAAA,MAAA,EAAA,YAAA,EAAA,cAAA,EAAA,UAAA,IAAA,EAAA,GAAA,EAAA,EAlHA,IAAMC,GAAa,EAAE,EAAA,GAAA,cACfC,GAAU,EAAE,EAAA,GAAA,WACZC,GAAW,EAAE,EAAA,GAAA,sCACbC,GAAY,EAAE,EAAA,GAAA,sCACdC,GAAU,EAAE,EAAA,GAAA,WACZC,GAAS,EAAE,EAAA,GAAA,6BACXC,GAAU,EAAE,EAAA,GAAA,WAEZC,GAAa,EAAa,EAAA,cAAA,SACb,OAAfA,GAEFC,QAAQC,KACN,kGAGJ,IAAIC,EAAQC,OAAOJ,IAAe,EAC9BK,GAAmB,EAEvBP,EAAOQ,YAAcH,EAErB,IAAMI,EAAmB,SAACC,GAClBC,IAAAA,EAAUjE,SAASkE,cAAc,OACvCD,EAAQvD,UAAUC,IAAI,SAAUqD,GAE1BG,IAAAA,GAAgB,EAAmBH,EAAAA,GAAAA,iBAAAA,OAAAA,EAAoBI,YAAAA,WAAU,GAGhEH,OAFPA,EAAQI,OAAOF,GAERF,GAIHK,EAAU,CACd,CAAEC,KAAM,WAAYC,MAAO,CAAC,EAAG,IAC/B,CAAED,KAAM,QAASC,MAAO,CAAC,EAAG,IAC5B,CAAED,KAAM,OAAQC,MAAO,CAAC,EAAG,IAC3B,CAAED,KAAM,SAAUC,MAAO,CAAC,EAAG,IAC7B,CAAED,KAAM,QAASC,MAAO,CAAC,EAAG,KAC5BC,IAAI,SAACC,GACFA,OAAAA,EAAAA,EAAAA,GAAAA,GADC,GAAA,CAEJC,SAAUZ,EAAiBW,EAAIH,KAAKK,mBAGhCC,EAAM,WAAG,IAAA,EAAA,EAAA,mBAAA,KAAA,SAAOC,EAAAA,EAAYC,EAAWC,GAA9B,OAAA,mBAAA,KAAA,SAAA,GAAA,OAAA,OAAA,EAAA,KAAA,EAAA,MAAA,KAAA,EAEP,OADN7B,EAASkB,OAAOC,EAAQQ,GAAYH,UADvB,EAAA,KAAA,GAEP,EAAQ1B,EAAAA,SAAAA,EAAY,WAFb,KAAA,EAIP,OADQA,EAAAA,EAAAA,eAAAA,GAHD,EAAA,KAAA,GAIP,EAAM,EAAA,OAAA,KAJC,KAAA,EAOP,OADQC,EAAAA,EAAAA,eAAAA,GAND,EAAA,KAAA,GAOP,EAAQA,EAAAA,SAAAA,EAAS,UAPV,KAAA,EAQP,OARO,EAAA,KAAA,IAQP,EAAM,EAAA,OAAA,KARC,KAAA,GAWP,OADNE,EAAUiB,OAAOC,EAAQS,GAAWJ,UAVvB,EAAA,KAAA,IAWP,EAAQL,EAAAA,SAAAA,EAAQS,GAAWJ,SAAU,QAX9B,KAAA,GAYP,OAZO,EAAA,KAAA,IAYP,EAAM,EAAA,OAAA,KAZC,KAAA,GAeP,OADLK,EAAc7B,EAAWC,GAAW1C,UAAUC,IAAI,aAdtC,EAAA,KAAA,IAeP,EAAM,EAAA,OAAA,KAfC,KAAA,GAmBP,OAFN0C,EAAQS,YAAckB,EAAc,UAAY,WAChD9B,EAAQxC,UAAUC,IAAI,YAlBT,EAAA,KAAA,IAmBP,EAAQ4C,EAAAA,SAAAA,EAAS,UAnBV,KAAA,GAsBP,OADED,EAAAA,EAAAA,SAAAA,EAAQ,cArBH,EAAA,KAAA,IAsBP,EAAM,EAAA,OAAA,KAtBC,KAAA,GAuBbA,EAAOQ,YAAcH,EAvBR,KAAA,GAAA,IAAA,MAAA,OAAA,EAAA,SAAA,MAATkB,OAAAA,SAAM,EAAA,EAAA,GAAA,OAAA,EAAA,MAAA,KAAA,YAAA,GA0BNI,EAAO,SAAuB,GAApBC,IAAAA,EAAAA,EAAAA,cACVrB,IAAAA,EAAAA,CACJA,GAAmB,EAEbsB,IAAAA,EAAiBD,EAAcE,aAAa,cAC5CN,EAAaR,EAAQe,UAAU,SAAA,GAAcd,OAAXA,EAAAA,OAAoBY,IAEtDzD,GAAS,EAAa,EAAA,cAAA,EAAG4C,EAAQgB,OAAS,GAC1CP,EAAYT,EACfG,IAAI,SAACc,EAAGC,GAAMA,OAAAA,IAGdC,OAAO,SAACF,EAAGC,GAAMA,OAAAA,IAAMV,IAAYpD,GAEhCsD,EAAcV,EAAQQ,GAAYN,MAAMtC,SAAS6C,GAEvDpB,GAASqB,EAAc,GAAK,GACnB,EAAA,EAAA,UAAA,QAASrB,GAElBkB,EAAOC,EAAYC,EAAWC,KAG1BU,EAAQ,WAAG,IAAA,EAAA,EAAA,mBAAA,KAAA,SAAA,IAAA,OAAA,mBAAA,KAAA,SAAA,GAAA,OAAA,OAAA,EAAA,KAAA,EAAA,MAAA,KAAA,EACV7B,GAAAA,EADU,CAAA,EAAA,KAAA,EAAA,MAAA,OAAA,EAAA,OAAA,UAAA,KAAA,EAIT,OAFNA,GAAmB,EAFJ,EAAA,KAAA,GAIT,EAAQX,EAAAA,SAAAA,EAAS,WAJR,KAAA,GAKDA,EAAAA,EAAAA,eAAAA,IAEAD,EAAAA,EAAAA,eAAAA,IACNA,EAAAA,EAAAA,SAAAA,EAAY,WAElB,EAAA,EAAA,GAAA,cAAcvC,UAAUI,OAAO,aAEjCoC,EAAQxC,UAAUI,OAAO,YAEzBqC,EAASwC,YAAYxC,EAASyC,kBAC9BxC,EAAUuC,YAAYvC,EAAUwC,kBAEhC/B,GAAmB,EAjBJ,KAAA,GAAA,IAAA,MAAA,OAAA,EAAA,SAAA,MAAX6B,OAAAA,WAAQ,OAAA,EAAA,MAAA,KAAA,YAAA,IAoBd,EAAG,EAAA,IAAA,sBAAsBG,QAAQ,SAAC5B,GAChCA,EAAQrD,iBAAiB,QAASqE,MAGpC,EAAE,EAAA,GAAA,WAAWrE,iBAAiB,QAAS8E","file":"script.ac40ab6e.js","sourceRoot":"../src","sourcesContent":["export const $ = document.querySelector.bind(document);\n\nexport const $$ = document.querySelectorAll.bind(document);\n\nexport const animate = ($el, animation) =>\n  new Promise((resolve) => {\n    const removeAnimation = () => {\n      $el.classList.remove(animation);\n      $el.removeEventListener('animationend', removeAnimation);\n      resolve($el);\n    };\n\n    $el.classList.add(animation);\n    $el.addEventListener('animationend', removeAnimation);\n  });\n\nexport const delay = (duration = 0) =>\n  new Promise((resolve) => {\n    setTimeout(resolve, duration);\n  });\n\nexport const toggleDisplay = ($el) => {\n  $el.classList.toggle('hidden');\n};\n\nexport const genRandomNum = (min = 0, max = 1) =>\n  Math.floor(min + Math.random() * (max - min));\n\nexport const getSavedItem = (key) => {\n  try {\n    return localStorage.getItem(key);\n  } catch (err) {\n    if (err instanceof DOMException && err.message.includes('localStorage'))\n      return null;\n    throw err;\n  }\n};\n\nexport const saveItem = (key, value) => {\n  try {\n    localStorage.setItem(key, value);\n    return true;\n  } catch (err) {\n    if (err instanceof DOMException && err.message.includes('localStorage'))\n      return false;\n    throw err;\n  }\n};\n","const { $, animate, toggleDisplay } = require('./_utils');\n\nconst $overlay = $('.overlay');\nconst $rulesBtn = $('.rules');\nconst $closeModalBtn = $('.modal > button');\n\nconst hideModal = (event) => {\n  event.stopPropagation();\n  const { target } = event;\n\n  if (target === $overlay || $closeModalBtn.contains(target)) {\n    animate($overlay, 'fadeOut').then(toggleDisplay);\n  }\n};\n\nconst showModal = () => {\n  toggleDisplay($overlay);\n  animate($overlay, 'fadeIn');\n};\n\n$closeModalBtn.addEventListener('click', hideModal, true);\n$overlay.addEventListener('click', hideModal, true);\n$rulesBtn.addEventListener('click', showModal);\n","import './_modal';\nimport {\n  $,\n  $$,\n  animate,\n  delay,\n  toggleDisplay,\n  genRandomNum,\n  getSavedItem,\n  saveItem,\n} from './_utils';\n\nconst $playField = $('.playfield');\nconst $result = $('.result');\nconst $leftCol = $('.result > .col:nth-child(1) > .box');\nconst $rightCol = $('.result > .col:nth-child(2) > .box');\nconst $status = $('.status');\nconst $score = $('.score > div:nth-child(2)');\nconst $center = $('.center');\n\nconst savedScore = getSavedItem('score');\nif (savedScore === null)\n  // eslint-disable-next-line no-console\n  console.warn(\n    \"The score won't be saved between sessions as third party cookies are disabled in your browser.\",\n  );\n\nlet score = Number(savedScore) || 0;\nlet isGameInProgress = false;\n\n$score.textContent = score;\n\nconst newOptionElement = (className) => {\n  const $option = document.createElement('div');\n  $option.classList.add('option', className);\n\n  const $spanWithIcon = $(`button.option.${className} > span`).cloneNode(true);\n  $option.append($spanWithIcon);\n\n  return $option;\n};\n\n// 'beats' contains indexes of the options\nconst options = [\n  { name: 'Scissors', beats: [1, 3] },\n  { name: 'Paper', beats: [2, 4] },\n  { name: 'Rock', beats: [3, 0] },\n  { name: 'Lizard', beats: [4, 1] },\n  { name: 'Spock', beats: [0, 2] },\n].map((opt) => ({\n  ...opt,\n  $element: newOptionElement(opt.name.toLowerCase()),\n}));\n\nconst render = async (playerPick, housePick, isPlayerWon) => {\n  $leftCol.append(options[playerPick].$element);\n  await animate($playField, 'fadeOut');\n  toggleDisplay($playField);\n  await delay(300);\n\n  toggleDisplay($result);\n  await animate($result, 'fadeIn');\n  await delay(800);\n\n  $rightCol.append(options[housePick].$element);\n  await animate(options[housePick].$element, 'flip');\n  await delay(500);\n\n  (isPlayerWon ? $leftCol : $rightCol).classList.add('highlight');\n  await delay(1000);\n\n  $status.textContent = isPlayerWon ? 'You win' : 'You lose';\n  $result.classList.add('expanded');\n  await animate($center, 'expand');\n\n  animate($score, 'flip-scale');\n  await delay(300);\n  $score.textContent = score;\n};\n\nconst play = ({ currentTarget }) => {\n  if (isGameInProgress) return;\n  isGameInProgress = true;\n\n  const clickedOptName = currentTarget.getAttribute('aria-label');\n  const playerPick = options.findIndex(({ name }) => name === clickedOptName);\n\n  const random = genRandomNum(0, options.length - 1);\n  const housePick = options\n    .map((_, i) => i) // saving initial indexes\n    // filtering out the option already picked by a player\n    // & picking a random option from the rest\n    .filter((_, i) => i !== playerPick)[random];\n\n  const isPlayerWon = options[playerPick].beats.includes(housePick);\n\n  score += isPlayerWon ? 1 : -1;\n  saveItem('score', score);\n\n  render(playerPick, housePick, isPlayerWon);\n};\n\nconst newRound = async () => {\n  if (!isGameInProgress) return;\n  isGameInProgress = false;\n\n  await animate($result, 'fadeOut');\n  toggleDisplay($result);\n\n  toggleDisplay($playField);\n  animate($playField, 'fadeIn');\n\n  $('.highlight').classList.remove('highlight');\n\n  $result.classList.remove('expanded');\n\n  $leftCol.removeChild($leftCol.lastElementChild);\n  $rightCol.removeChild($rightCol.lastElementChild);\n\n  isGameInProgress = false;\n};\n\n$$('.playfield .option').forEach(($option) => {\n  $option.addEventListener('click', play);\n});\n\n$('.repeat').addEventListener('click', newRound);\n"]}